/*! dicom-character-set - 1.0.2 - 2019-05-05 | (c) 2018 Radialogica, LLC | https://github.com/radialogica/dicom-character-set */
!function(e,n){"object"==typeof exports&&"object"==typeof module?module.exports=n():"function"==typeof define&&define.amd?define([],n):"object"==typeof exports?exports["dicom-character-set"]=n():e["dicom-character-set"]=n()}(this,function(){return function(e){var n={};function t(o){if(n[o])return n[o].exports;var r=n[o]={i:o,l:!1,exports:{}};return e[o].call(r.exports,r,r.exports,t),r.l=!0,r.exports}return t.m=e,t.c=n,t.d=function(e,n,o){t.o(e,n)||Object.defineProperty(e,n,{enumerable:!0,get:o})},t.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t.t=function(e,n){if(1&n&&(e=t(e)),8&n)return e;if(4&n&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(t.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&n&&"string"!=typeof e)for(var r in e)t.d(o,r,function(n){return e[n]}.bind(null,r));return o},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},t.p="",t(t.s=1)}([function(e,n){e.exports=require("util")},function(e,n,t){"use strict";t.r(n);var o={codeElement:"G0",escapeSequence:[27,40,66],encoding:"windows-1254",isASCII:!0,bytesPerCodePoint:1},r={"ISO_IR 6":{encoding:"utf-8"},"ISO_IR 100":{encoding:"windows-1254"},"ISO_IR 101":{encoding:"iso-8859-2"},"ISO_IR 109":{encoding:"iso-8859-3"},"ISO_IR 110":{encoding:"iso-8859-4"},"ISO_IR 144":{encoding:"iso-8859-5"},"ISO_IR 127":{encoding:"iso-8859-6"},"ISO_IR 126":{encoding:"iso-8859-7"},"ISO_IR 138":{encoding:"iso-8859-8"},"ISO_IR 148":{encoding:"windows-1254"},"ISO_IR 13":{encoding:"shift-jis"},"ISO_IR 166":{encoding:"tis-620"},"ISO 2022 IR 6":{extension:!0,elements:[o]},"ISO 2022 IR 100":{extension:!0,elements:[o,{codeElement:"G1",escapeSequence:[27,45,65],encoding:"windows-1254",bytesPerCodePoint:1}]},"ISO 2022 IR 101":{extension:!0,elements:[o,{codeElement:"G1",escapeSequence:[27,45,66],encoding:"iso-8859-2",bytesPerCodePoint:1}]},"ISO 2022 IR 109":{extension:!0,elements:[o,{codeElement:"G1",escapeSequence:[27,45,67],encoding:"iso-8859-3",bytesPerCodePoint:1}]},"ISO 2022 IR 110":{extension:!0,elements:[o,{codeElement:"G1",escapeSequence:[27,45,68],encoding:"iso-8859-4",bytesPerCodePoint:1}]},"ISO 2022 IR 144":{extension:!0,elements:[o,{codeElement:"G1",escapeSequence:[27,45,76],encoding:"iso-8859-5",bytesPerCodePoint:1}]},"ISO 2022 IR 127":{extension:!0,elements:[o,{codeElement:"G1",escapeSequence:[27,45,71],encoding:"iso-8859-6",bytesPerCodePoint:1}]},"ISO 2022 IR 126":{extension:!0,elements:[o,{codeElement:"G1",escapeSequence:[27,45,70],encoding:"iso-8859-7",bytesPerCodePoint:1}]},"ISO 2022 IR 138":{extension:!0,elements:[o,{codeElement:"G1",escapeSequence:[27,45,72],encoding:"iso-8859-8",bytesPerCodePoint:1}]},"ISO 2022 IR 148":{extension:!0,elements:[o,{codeElement:"G1",escapeSequence:[27,45,77],encoding:"windows-1254",bytesPerCodePoint:1}]},"ISO 2022 IR 13":{extension:!0,elements:[{codeElement:"G0",escapeSequence:[27,40,74],encoding:"shift-jis",bytesPerCodePoint:1},{codeElement:"G1",escapeSequence:[27,41,73],encoding:"shift-jis",bytesPerCodePoint:1}]},"ISO 2022 IR 166":{extension:!0,elements:[o,{codeElement:"G1",escapeSequence:[27,45,84],encoding:"tis-620",bytesPerCodePoint:1}]},"ISO 2022 IR 87":{extension:!0,multiByte:!0,elements:[{codeElement:"G0",escapeSequence:[27,36,66],encoding:"euc-jp",setHighBit:!0,bytesPerCodePoint:2}]},"ISO 2022 IR 159":{extension:!0,multiByte:!0,elements:[{codeElement:"G0",escapeSequence:[27,36,40,68],encoding:"euc-jp",isJISX0212:!0,bytesPerCodePoint:2}]},"ISO 2022 IR 149":{extension:!0,multiByte:!0,elements:[{codeElement:"G1",escapeSequence:[27,36,41,67],encoding:"euc-kr",bytesPerCodePoint:2}]},"ISO 2022 IR 58":{extension:!0,multiByte:!0,elements:[{codeElement:"G1",escapeSequence:[27,36,41,65],encoding:"gb18030",bytesPerCodePoint:2}]},"ISO_IR 192":{encoding:"utf-8",multiByte:!0},GB18030:{encoding:"gb18030",multiByte:!0},GBK:{encoding:"gbk",multiByte:!0}},i=27,c=10,s=12,u=13,d=9,a=92,f=61,l=94,I="undefined"==typeof TextDecoder?t(0).TextDecoder:TextDecoder;function m(e){return e.replace(/~/g,"‾").replace(/\\/g,"¥")}function S(e,n,t,o,r){var i=v(n,t,o,r);return e+y(n.encoding,i)}function g(e,n,t,o,r){var i=v(n,t,o,r);return(""===e?Promise.resolve(""):e).then(function(e){return P(n.encoding,i).then(function(n){return e+n})})}function p(e,n,t,o,i){!function(e,n){if(n&&!(n instanceof Uint8Array))throw new Error("bytes must be a Uint8Array");if(e&&"string"!=typeof e)throw new Error("specificCharacterSet must be a string")}(t,o);var I=function(e){var n=e?e.split("\\").map(function(e){return e.trim().toUpperCase()}):[""];""===n[0]&&(n[0]=n.length>1?"ISO 2022 IR 6":"ISO_IR 6");if(n.some(function(e){return void 0===r[e]}))throw new Error("Invalid specific character set specified.");return function(e){for(var n=e.length>1,t=[],o=0;o<e.length;o++){var r=e[o];t.includes(r)||t.push(n?r.replace("ISO_IR","ISO 2022 IR"):r)}return t}(n=function(e){var n=r[e[0]];return n.multiByte&&!n.extension?[e[0]]:e.filter(function(e){return!r[e].multiByte||r[e].extension})}(n))}(t);if(1===I.length&&!I[0].startsWith("ISO 2022"))return e(r[I[0]].encoding,o);var m=i||{};return function(e,n,t,o){var r="";if(!n||0===n.length)return r;var i={G0:e[0].elements.find(function(e){return"G0"===e.codeElement}),G1:e[0].elements.find(function(e){return"G1"===e.codeElement})},c=Object.assign({},i),s=0,u=void 0,d=0;for(;d<n.length;){u||(u=h(n[s],c));var a=b(n,s,u,c,i,t);if((d=a.index)>s&&(r=o(r,u,n,s,d)),s=d,u=a.characterSet,a.escapeSequence){var f=x(n,d,e);c[f.codeElement]=f,s+=f.escapeSequence.length}}return r}(I.map(function(e){return r[e]}),o,function(e){var n=(e||"").trim().toUpperCase(),t=[c,s,u,d];["UT","ST","LT"].includes(n)||t.push(a);"PN"===n&&(t.push(f),t.push(l));return t}(m.vr),n)}function y(e,n){var t=new I(e).decode(n);return"shift-jis"===e?m(t):t}function P(e,n){return new Promise(function(t){var o=new FileReader;o.onload="shift-jis"===e?function(){return t(m(o.result))}:function(){return t(o.result)};var r=new Blob([n]);o.readAsText(r,e)})}function b(e,n,t,o,r,c){for(var s=n;s<e.length;s+=t.bytesPerCodePoint){if(e[s]===i)return{escapeSequence:!0,index:s};1===t.bytesPerCodePoint&&c.includes(e[s])&&Object.assign(o,r);var u=h(e[s],o);if(t&&u!==t)return{characterSet:u,index:s}}return{index:e.length}}function h(e,n){return e>127&&n.G1?n.G1:n.G0?n.G0:n.G1&&1===n.G1.bytesPerCodePoint?n.G1:r["ISO 2022 IR 6"].elements[0]}function v(e,n,t,o){var r=void 0;return e.isJISX0212?r=function(e,n,t){var o=t-n;if(o%2!=0)throw new Error("JIS X string with a character not having exactly two bytes!");for(var r=new Uint8Array(o+o/2),i=0,c=n;c<t;c+=2)r[i++]=143,r[i++]=128|e[c],r[i++]=128|e[c+1];return r}(n,t,o):(r=n.slice(t,o),e.setHighBit&&function(e){for(var n=0;n<e.length;n++)e[n]|=128}(r)),r}function O(e,n,t){for(var o=0;o<e.length;o++){if(t+o>=n.length)return!1;if(n[t+o]!==e[o])return!1}return!0}function x(e,n,t){for(var o=0;o<t.length;o++)for(var r=t[o],i=0;i<r.elements.length;i++){var c=r.elements[i];if(O(c.escapeSequence,e,n))return c}throw new Error("Unknown escape sequence encountered at byte "+n)}function R(e,n,t){return p(y,S,e,n,t)}function w(e,n,t){return p(P,g,e,n,t)}t.d(n,"convertBytes",function(){return R}),t.d(n,"convertBytesPromise",function(){return w}),t.d(n,"characterSets",function(){return r})}])});
//# sourceMappingURL=dicom-character-set.min.js.map
